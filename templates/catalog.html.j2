<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ catalog_title }}</title>
</head>
<body>

  <!-- COVER -->
  <div class="cover">
    <div class="cover-accent"></div>
    <h1>{{ catalog_title }}</h1>
    <p class="subtitle">{{ generated_date }}</p>
    <div class="cover-rule"></div>
    <p class="stats"><strong>{{ movies|length }}</strong> Movies &middot; <strong>{{ shows|length }}</strong> TV Shows</p>
  </div>

  <!-- MOVIES -->
  <div class="section-divider">
    <div class="divider-accent"></div>
    <h2>Movies</h2>
    <p class="count">{{ movies|length }} titles</p>
  </div>

  <table class="card-grid">
    {% for movie in movies %}
    {% if loop.index is odd %}<tr>{% endif %}
      <td>
        <div class="card">
          <div class="card-poster">
            {% if movie.poster_path %}
            <img src="file://{{ movie.poster_path }}" alt="{{ movie.title }}">
            {% else %}
            <div class="no-poster"><span>{{ movie.title }}</span></div>
            {% endif %}
          </div>
          <div class="card-info">
            <div class="card-title">{{ movie.title }}</div>
            <p class="card-meta">{{ movie.year or '' }} &nbsp; <span class="card-rating">{{ movie.content_rating }}</span></p>
            <p class="card-genres">{{ movie.genres | join(' · ') }}</p>
            {% if movie.duration_minutes %}<p class="card-detail">{{ movie.duration_minutes }} min</p>{% endif %}
          </div>
        </div>
      </td>
    {% if loop.index is even or loop.last %}</tr>{% endif %}
    {% endfor %}
  </table>

  <!-- TV SHOWS -->
  <div class="section-divider">
    <div class="divider-accent"></div>
    <h2>TV Shows</h2>
    <p class="count">{{ shows|length }} titles</p>
  </div>

  <table class="card-grid">
    {% for show in shows %}
    {% if loop.index is odd %}<tr>{% endif %}
      <td>
        <div class="card">
          <div class="card-poster">
            {% if show.poster_path %}
            <img src="file://{{ show.poster_path }}" alt="{{ show.title }}">
            {% else %}
            <div class="no-poster"><span>{{ show.title }}</span></div>
            {% endif %}
          </div>
          <div class="card-info">
            <div class="card-title">{{ show.title }}</div>
            <p class="card-meta">{{ show.year or '' }} &nbsp; <span class="card-rating">{{ show.content_rating }}</span></p>
            <p class="card-genres">{{ show.genres | join(' · ') }}</p>
            <p class="card-detail">{{ show.season_count }} season{{ 's' if show.season_count != 1 else '' }} &bull; {{ show.episode_count }} episodes</p>
          </div>
        </div>
      </td>
    {% if loop.index is even or loop.last %}</tr>{% endif %}
    {% endfor %}
  </table>

</body>
</html>
